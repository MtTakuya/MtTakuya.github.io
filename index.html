<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>å„„ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï½œMobile Ultra</title>
<style>
:root{
  --bg:#0b0f1a; --panel:#0f172a; --ink:#e6edf3; --muted:#93a3b8; --line:#1f2a44;
  --accent:#38bdf8; --accent-2:#a78bfa; --ok:#34d399; --warn:#f59e0b; --danger:#f87171;
  --shadow: 0 8px 24px rgba(2,6,23,.28), 0 2px 6px rgba(2,6,23,.25);
  --radius:16px; --tap:48px; --space:14px; --space-lg:18px;
  --fs: clamp(14px, 1.6vw, 16px); --fs-sm: clamp(12px,1.4vw,14px); --fs-lg: clamp(16px,2vw,18px);
}
.light{
  --bg:#f7f8fb; --panel:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e5e7eb;
  --accent:#0ea5e9; --accent-2:#7c3aed; --shadow: 0 8px 18px rgba(2,6,23,.10), 0 2px 6px rgba(2,6,23,.08);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:radial-gradient(1200px 900px at 10% -10%, rgba(59,130,246,.08), transparent),
  radial-gradient(1000px 700px at 120% 20%, rgba(168,85,247,.08), transparent), var(--bg);
  color:var(--ink);
  font-family: "Hiragino Sans","Yu Gothic","Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-tap-highlight-color: transparent;
  font-size: var(--fs); line-height: 1.6;
}
.app{min-height:100%; display:grid; grid-template-rows:auto 1fr auto}

/* Header */
header{
  position:sticky; top:0; z-index:20; backdrop-filter: blur(10px);
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  border-bottom:1px solid var(--line);
  display:flex; align-items:center; gap:10px; padding:10px 12px;
}
.brand{display:flex; gap:10px; align-items:center; min-width:0}
.logo{width:28px;height:28px;border-radius:10px;background:conic-gradient(from 180deg, var(--accent), var(--accent-2));
  box-shadow:var(--shadow);border:1px solid var(--line)}
.title{font-weight:800; letter-spacing:.2px; font-size: clamp(15px,2.6vw,18px); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.tools{display:flex; gap:8px}
.btn{
  min-height:var(--tap); padding:0 14px; border-radius:12px; border:1px solid var(--line);
  background:var(--panel); color:var(--ink); font-weight:700; font-size:var(--fs);
  cursor:pointer; box-shadow:var(--shadow);
}
.iconbtn{width:var(--tap); min-width:var(--tap); padding:0; text-align:center}
.btn:active{transform:translateY(1px)}

/* Sections as cards */
.container{padding:12px}
.card, .panel{
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--panel);
  border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow);
  padding: var(--space-lg);
  margin-bottom: 12px;
}

/* KPI row becomes stacked */
.kpi-wrap{display:grid; gap:12px}
.kpi{
  display:flex; align-items:center; justify-content:space-between; gap:12px
}
.kpi .left{display:flex; flex-direction:column; gap:6px}
.knum{font-size: clamp(28px,6.5vw,34px); font-weight:800; line-height:1}
.kunit{color:var(--muted); font-weight:700; margin-left:6px; font-size:var(--fs-lg)}
.kmuted{color:var(--muted); font-size:var(--fs-sm)}
.kctrl{display:flex; gap:8px; align-items:center}
.kctrl button{
  min-width:44px; min-height:44px; border-radius:12px; font-size:18px; font-weight:800;
  border:1px solid var(--line); background:var(--panel); color:var(--ink);
}
.kctrl input{
  width:96px; min-height:44px; border-radius:12px; padding:0 10px; text-align:right;
  border:1px solid var(--line); background:var(--panel); color:var(--ink); font-size:16px;
  -moz-appearance: textfield;
}
.kctrl input::-webkit-outer-spin-button,
.kctrl input::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }

/* Chips */
.chips{display:flex; gap:6px; flex-wrap:wrap; margin-top:8px}
.chip{border:1px solid var(--line); color:var(--muted); padding:6px 10px; border-radius:999px; font-size:var(--fs-sm)}

/* Accordion */
.accordion .head{display:flex; align-items:center; justify-content:space-between; gap:12px; min-height:var(--tap); cursor:pointer}
.accordion .head h3{margin:0; font-size:var(--fs-lg)}
.accordion .body{margin-top:10px}
.chev{width:28px;height:28px; border-radius:999px; display:grid; place-items:center; border:1px solid var(--line)}
.rotate{transform:rotate(180deg)}

/* Grid == 1col on mobile */
.grid-2, .grid-3 {display:grid; gap:12px}
.grid-2{grid-template-columns:1fr}
.grid-3{grid-template-columns:1fr}
@media (min-width: 900px){ .grid-2{grid-template-columns:1fr 1fr} .grid-3{grid-template-columns:repeat(3,1fr)} }

.rule{border:1px dashed var(--line); border-radius:12px; padding:10px 12px}
ul.clean{list-style:none; padding:0; margin:6px 0}
ul.clean li{padding:6px 0}

/* Timeline */
.timeline{display:grid; gap:12px}
.milestone{display:flex; gap:10px; align-items:center; border-left:3px solid var(--line); padding-left:10px}
.milestone .dot{width:10px;height:10px;border-radius:999px;background:var(--accent)}
.milestone .name{font-weight:700}
.milestone .when{color:var(--muted); font-weight:700; margin-left:auto; font-size:var(--fs-sm)}

/* Checklist */
.todo{display:grid; gap:10px}
.item{display:flex; gap:10px; align-items:flex-start; border:1px solid var(--line); padding:12px; border-radius:12px; background:var(--panel)}
.item input{transform:translateY(3px); width:22px; height:22px; accent-color:var(--accent)}
.item .label{flex:1}

/* Tabs + swipe */
.tabs{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px}
.tab{padding:8px 14px; border:1px solid var(--line); border-radius:999px; cursor:pointer; color:var(--muted); background:var(--panel); min-height:var(--tap); display:flex; align-items:center}
.tab.active{color:var(--ink); border-color:var(--accent)}
.hidden{display:none}
.tabpane{touch-action: pan-y}

/* Bottom bar */
.bbar{
  position:sticky; bottom:0; z-index:25; backdrop-filter: blur(8px);
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.10));
  border-top:1px solid var(--line); display:flex; gap:8px; padding:8px; align-items:center; justify-content:space-between;
}
.bbar .btn{flex:1}

/* FAB */
.fab{
  position:fixed; right:16px; bottom:80px; z-index:30;
  width:56px; height:56px; border-radius:16px; border:1px solid var(--line);
  background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#0b1020; font-weight:900; font-size:22px;
  display:grid; place-items:center; box-shadow:var(--shadow); cursor:pointer;
}

/* Modal (bottom sheet on mobile) */
#modal{position:fixed; inset:0; display:none; z-index:40; background:rgba(0,0,0,.45)}
.sheet{
  position:absolute; left:0; right:0; bottom:0; margin:auto;
  width:min(720px,100%); max-height:92%; overflow:auto;
  border-radius:18px 18px 0 0; border:1px solid var(--line); background:var(--panel); box-shadow:var(--shadow);
  padding:14px;
}
.sheet h3{margin:0 0 10px}
.row{display:flex; gap:10px; align-items:center}
.input{
  width:100%; min-height:44px; border:1px solid var(--line); background:var(--panel); color:var(--ink);
  border-radius:12px; padding:10px; font-size:16px;
}

/* Desktop max width */
@media (min-width: 1100px){
  .container{max-width: 980px; margin: 0 auto}
}

/* Print */
@media print{
  header, .bbar, .fab, #modal{display:none!important}
  body{background:#fff}
  .card,.panel{box-shadow:none}
}
</style>
</head>
<body class="light" id="root">
  <header>
    <div class="brand">
      <div class="logo"></div>
      <div class="title">å„„ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ <span style="opacity:.7; font-weight:700">â€” 2026å¹´11æœˆãƒ”ãƒ¼ã‚¯</span></div>
    </div>
    <div class="tools">
      <button class="btn iconbtn" id="theme" title="ãƒ€ãƒ¼ã‚¯/ãƒ©ã‚¤ãƒˆ">ğŸŒ—</button>
      <button class="btn iconbtn" onclick="window.print()" title="å°åˆ·/PDF">ğŸ–¨</button>
      <button class="btn iconbtn" id="reset" title="é€²æ—ãƒªã‚»ãƒƒãƒˆ">â†º</button>
      <button class="btn" id="edit">âœ ç·¨é›†</button>
    </div>
  </header>

  <main class="container">
    <!-- KPI -->
    <section class="card">
      <h3 style="margin:0 0 10px">KPIï¼ˆã‚¿ãƒƒãƒ—ã§æ›´æ–°ï¼‰</h3>
      <div class="kpi-wrap">
        <!-- ä½“é‡ -->
        <div class="kpi">
          <div class="left">
            <div><span class="knum" id="wt">71</span><span class="kunit">kg</span></div>
            <div class="kmuted">ç¾åœ¨ä½“é‡ï¼ˆç›®æ¨™ <span id="wtTarget">77</span>kgï¼‰</div>
          </div>
          <div class="kctrl">
            <button id="wtMinus">âˆ’</button>
            <input id="wtInput" type="number" step="0.1" inputmode="decimal" />
            <button id="wtPlus">ï¼‹</button>
          </div>
        </div>
        <!-- ç¡çœ  -->
        <div class="kpi">
          <div class="left">
            <div><span class="knum" id="sleep">7.0</span><span class="kunit">h</span></div>
            <div class="kmuted">å¹³å‡ç¡çœ ï¼ˆä¸‹é™ <span id="sleepMin">7.0</span>hï¼‰</div>
          </div>
          <div class="kctrl">
            <button id="slMinus">âˆ’</button>
            <input id="slInput" type="number" step="0.1" inputmode="decimal" />
            <button id="slPlus">ï¼‹</button>
          </div>
        </div>
        <!-- æ°´åˆ† -->
        <div class="kpi">
          <div class="left">
            <div><span class="knum" id="water">2.5</span><span class="kunit">L</span></div>
            <div class="kmuted">æ°´åˆ†ï¼ˆåˆå®¿æ™‚ <span id="waterCamp">3.0</span>Lï¼‰</div>
          </div>
          <div class="kctrl">
            <button id="waMinus">âˆ’</button>
            <input id="waInput" type="number" step="0.1" inputmode="decimal" />
            <button id="waPlus">ï¼‹</button>
          </div>
        </div>
      </div>
      <div class="chips" style="margin-top:10px">
        <span class="chip">é¢¨å‘‚æƒé™¤ï¼‹é£Ÿå™¨æ´—ã„</span>
        <span class="chip">ã‚¸ãƒ ï¼šA/B/C/D</span>
        <span class="chip">çŸ¥è­˜ã‚¹ãƒ©ã‚¤ãƒ‰1æšâ†’Anki5åˆ†</span>
      </div>
    </section>

    <!-- ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ -->
    <section class="panel accordion">
      <div class="head" data-acc="road">
        <h3>ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆ2025/10 â†’ 2026/11ï¼‰</h3>
        <div class="chev" id="chev-road">âŒ„</div>
      </div>
      <div class="body" id="acc-road">
        <div class="timeline">
          <div class="milestone"><span class="dot"></span><span class="name">ãƒ•ã‚§ãƒ¼ã‚ºAï¼šåœŸå°ï¼ˆã€œ2026/01ï¼‰</span><span class="when">ç¡çœ /æ°´åˆ†/å®¶äº‹/ä¾å­˜/åŸºç¤ä½“åŠ›</span></div>
          <div class="milestone"><span class="dot"></span><span class="name">ãƒ•ã‚§ãƒ¼ã‚ºBï¼šå°ã•ãç¨¼ãï¼ˆã€œ2026/05ï¼‰</span><span class="when">BÎ²/C MVP/PC/ä¼šè­°é‹ç”¨</span></div>
          <div class="milestone"><span class="dot"></span><span class="name">ãƒ•ã‚§ãƒ¼ã‚ºCï¼šç¶™ç¶šåå…¥åŒ–ï¼ˆã€œ2026/09ï¼‰</span><span class="when">3â€“10ä¸‡/æœˆãƒ»76kgå°</span></div>
          <div class="milestone"><span class="dot"></span><span class="name">ãƒ•ã‚§ãƒ¼ã‚ºDï¼šä»•ä¸Šã’ï¼ˆã€œ2026/11ï¼‰</span><span class="when">ç–²åŠ´ç®¡ç†/ç™ºä¿¡/ãƒ”ãƒ¼ã‚¯</span></div>
        </div>
        <hr style="border:none;border-top:1px solid var(--line); margin:12px 0" />
        <div class="grid-2">
          <div class="rule"><b>åœŸæ›œ</b>ï¼š10â€“12(ã€œ13) ãƒ©ã‚°ãƒ“ãƒ¼ â†’ è£œå¼· / 3é€£ä¼‘ï¼åˆå®¿</div>
          <div class="rule"><b>å¹³æ—¥</b>ï¼š9â€“17:30å‹¤å‹™ â†’ å®¶äº‹ â†’ é€±4ã‚¸ãƒ  or ã‚¹ãƒ—ãƒªãƒ³ãƒˆ â†’ å­¦ç¿’45åˆ† â†’ 23:30å°±å¯</div>
        </div>
      </div>
    </section>

    <!-- 4æœ¬æŸ±ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ -->
    <section class="panel accordion">
      <div class="head" data-acc="pillars">
        <h3>4æœ¬æŸ±ï¼ˆä¸­æ ¸ã‚ªãƒšï¼‰</h3>
        <div class="chev" id="chev-pillars">âŒ„</div>
      </div>
      <div class="body" id="acc-pillars">
        <div class="grid-2">
          <div class="rule"><b>åŸºç›¤</b><ul class="clean"><li>ç¡çœ 7h / æ°´2.5L / å®¶äº‹ï¼ˆé¢¨å‘‚ï¼‹é£Ÿå™¨ï¼‰ï¼‹ãƒ­ãƒ¼ãƒ†1ã¤</li></ul></div>
          <div class="rule"><b>ç«¶æŠ€ã‚¨ãƒ³ã‚¸ãƒ³</b><ul class="clean"><li>é€±4ã‚¸ãƒ ï¼ˆAä¸‹åŠèº«é‡ / Bä¸Š / Cè£œå¼· / Dä¸‹ä¸­ï¼‹è…¹ï¼‰ï¼‹é€±2ã‚¹ãƒ—ãƒªãƒ³ãƒˆ</li></ul></div>
          <div class="rule"><b>ã‚¹ã‚­ãƒ«ãƒ»çŸ¥è­˜</b><ul class="clean"><li>æŠ€è¡“45åˆ†/æ—¥ï¼ˆGitãƒ»Pythonãƒ»LLMãƒ»é…å¸ƒãƒ»èª²é‡‘ï¼‰</li><li>çŸ¥è­˜15åˆ†Ã—3ï¼ˆ1æ—¥1æšâ†’Ankiï¼‰</li></ul></div>
          <div class="rule"><b>ãƒ¬ãƒãƒ¬ãƒƒã‚¸</b><ul class="clean"><li>Bï¼šä¼šè­°ã€è¦ç‚¹/å®¿é¡Œ/æ—¥ç¨‹ã€‘â†’Î²èª²é‡‘</li><li>Cï¼šYouTubeé›†ä¸­æ”¯æ´ãƒ„ãƒ¼ãƒ«</li></ul></div>
        </div>
      </div>
    </section>

    <!-- é€±é–“è¨ˆç”» -->
    <section class="panel accordion">
      <div class="head" data-acc="week">
        <h3>é€±é–“è¨ˆç”»ï¼ˆå›ºå®šãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ï¼‰</h3>
        <div class="chev" id="chev-week">âŒ„</div>
      </div>
      <div class="body" id="acc-week">
        <div class="tabs" role="tablist" aria-label="é€±é–“ã‚¿ãƒ–">
          <div class="tab active" data-tab="mon" role="tab" aria-selected="true">æœˆã€œé‡‘</div>
          <div class="tab" data-tab="sat" role="tab" aria-selected="false">åœŸæ›œ</div>
          <div class="tab" data-tab="sun" role="tab" aria-selected="false">æ—¥æ›œ</div>
        </div>
        <div id="mon" class="tabpane" role="tabpanel">
          <div class="todo" id="todo-weekday"></div>
        </div>
        <div id="sat" class="tabpane hidden" role="tabpanel">
          <div class="todo" id="todo-sat"></div>
        </div>
        <div id="sun" class="tabpane hidden" role="tabpanel">
          <div class="todo" id="todo-sun"></div>
        </div>
      </div>
    </section>

    <!-- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° -->
    <section class="panel accordion">
      <div class="head" data-acc="train">
        <h3>ã‚¸ãƒ  & ã‚¹ãƒ—ãƒªãƒ³ãƒˆï¼ˆé€±4ï¼‹é€±2ï¼‰</h3>
        <div class="chev" id="chev-train">âŒ„</div>
      </div>
      <div class="body" id="acc-train">
        <div class="grid-2">
          <div>
            <div class="rule"><b>Aï¼šä¸‹åŠèº«é‡</b><ul class="clean"><li>SQ 6â€“8Ã—3 / RDL 6â€“8Ã—3 / ãƒ©ãƒ³ã‚¸ / ã‚«ãƒ¼ãƒ•</li><li>ä½“å¹¹ï¼šãƒ­ãƒ¼ãƒ©ãƒ¼ 8â€“12Ã—3 â†’ ç«‹ã¡ã‚³ãƒ­è£œåŠ©</li></ul></div>
            <div class="rule"><b>Bï¼šä¸ŠåŠèº«ãƒ—ãƒ¬ã‚¹</b><ul class="clean"><li>BP / ã‚·ãƒ§ãƒ«ãƒ€ãƒ¼ãƒ—ãƒ¬ã‚¹ / ãƒ‡ã‚£ãƒƒãƒ—ã‚¹</li><li>é¦–ã‚¢ã‚¤ã‚½ï¼ˆé€±2ï¼‰</li></ul></div>
          </div>
          <div>
            <div class="rule"><b>Cï¼šã‚¹ãƒ—ãƒªãƒ³ãƒˆè£œå¼·</b><ul class="clean"><li>ãƒ—ãƒ©ã‚¤ã‚ªãƒ»å›æ—‹ãƒ»è‡€éƒ¨ï¼‹ãƒ­ãƒ¼/æ‡¸å‚</li></ul></div>
            <div class="rule"><b>Dï¼šä¸‹åŠèº«ä¸­ï¼‹è…¹</b><ul class="clean"><li>ç‰‡è„šç³»ãƒ»ãƒ’ãƒ³ã‚¸ / ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ»ãƒ—ãƒ©ãƒ³ã‚¯</li></ul></div>
            <div class="rule"><b>ã‚¹ãƒ—ãƒªãƒ³ãƒˆ</b><ul class="clean"><li>10m/30m/60m Ã— å„3ï¼ˆå®Œå…¨ãƒ¬ã‚¹ãƒˆï¼‰ Ã— é€±2</li></ul></div>
          </div>
        </div>
      </div>
    </section>

    <!-- çŸ¥è­˜ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ  -->
    <section class="panel accordion">
      <div class="head" data-acc="know">
        <h3>çŸ¥è­˜ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ï¼ˆæ¯æ—¥15åˆ†Ã—3ï¼‰</h3>
        <div class="chev" id="chev-know">âŒ„</div>
      </div>
      <div class="body" id="acc-know">
        <div class="tabs" role="tablist">
          <div class="tab active" data-tab="hist">æ­´å²/æ”¿æ²»/çµŒæ¸ˆ</div>
          <div class="tab" data-tab="sports">ã‚¹ãƒãƒ¼ãƒ„/è»Š/ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³</div>
          <div class="tab" data-tab="life">é…’/å®¶ã¨ãŠé‡‘/æ—…è¡Œãƒ»ä¼šè©±</div>
        </div>
        <div id="hist" class="tabpane">
          <div class="grid-3">
            <div class="rule"><b>æ­´å²</b><ul class="clean"><li>å‡ºæ¥äº‹â†’å› â†’æœâ†’é•·æœŸå½±éŸ¿</li><li>ç”£æ¥­é©å‘½â†’éƒ½å¸‚åŒ–â†’åŠ´åƒæ³•â†’é¸æŒ™åˆ¶åº¦</li></ul></div>
            <div class="rule"><b>æ”¿æ²»ãƒ»åˆ¶åº¦</b><ul class="clean"><li>ä¸‰æ¨©åˆ†ç«‹ / é¸æŒ™ / åœ°æ–¹è‡ªæ²»</li><li>ç¨ãƒ»ç¤¾ä¼šä¿éšœã®æµã‚Œ</li></ul></div>
            <div class="rule"><b>çµŒæ¸ˆãƒ»æŠ•è³‡</b><ul class="clean"><li>é‡‘åˆ©ãƒ»ã‚¤ãƒ³ãƒ•ãƒ¬ãƒ»ç‚ºæ›¿</li><li>æŒ‡æ•°æŠ•è³‡ãƒ»è¤‡åˆ©ãƒ»ãƒªãƒãƒ©ãƒ³ã‚¹ / FCF</li></ul></div>
          </div>
        </div>
        <div id="sports" class="tabpane hidden">
          <div class="grid-3">
            <div class="rule"><b>ã‚¹ãƒãƒ¼ãƒ„</b><ul class="clean"><li>å¤§ä¼š/åæ‰€ï¼šèŠ±åœ’ï¼æ±å¤§é˜ªå¸‚èŠ±åœ’ãƒ©ã‚°ãƒ“ãƒ¼å ´</li><li>åå‰‡ãƒ»é€†è»¢ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨€èªåŒ–</li></ul></div>
            <div class="rule"><b>è»Š</b><ul class="clean"><li>ä¸»è¦ãƒ¡ãƒ¼ã‚«ãƒ¼</li><li>ãƒœãƒ‡ã‚£å‹Ã—ä¾¡æ ¼å¸¯â†’è¡—ã§å³ç­”ç·´ç¿’</li></ul></div>
            <div class="rule"><b>ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³</b><ul class="clean"><li>æ¸‹ã‚¯ãƒ©ï¼šãƒ˜ãƒªãƒ†ãƒ¼ã‚¸Ã—ãƒŸãƒ‹ãƒãƒ«</li><li>å†ç¾ã‚³ãƒ¼ãƒ‡é€±1 / Pinteresté€±10ãƒ”ãƒ³</li></ul></div>
          </div>
        </div>
        <div id="life" class="tabpane hidden">
          <div class="grid-3">
            <div class="rule"><b>é…’</b><ul class="clean"><li>ãƒ“ãƒ¼ãƒ«/ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼/æ—¥æœ¬é…’ã®è£½æ³•</li><li>ä»£è¡¨éŠ˜æŸ„Ã—ãƒ†ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°èªå½™10</li></ul></div>
            <div class="rule"><b>å®¶ã¨ãŠé‡‘</b><ul class="clean"><li>å›ºå®š/å¤‰å‹•è²»ã®å¯è¦–åŒ–</li><li>å£åº§/ã‚¯ãƒ¬ã‚«æœ€é©åŒ–</li></ul></div>
            <div class="rule"><b>æ—…è¡Œãƒ»ä¼šè©±</b><ul class="clean"><li>æŒã¡ç‰©ãƒ†ãƒ³ãƒ—ãƒ¬ / å½“æ—¥å‹•ç·š</li><li>äº‹å®Ÿâ†’æ„Ÿæƒ…â†’è¦æœ› / è¦ç´„â†’æ„Ÿè¬</li></ul></div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®¶äº‹ & é€±æ¬¡ -->
    <section class="panel accordion">
      <div class="head" data-acc="life">
        <h3>å®¶äº‹ & ä¾å­˜å¯¾ç­– / é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
        <div class="chev" id="chev-life">âŒ„</div>
      </div>
      <div class="body" id="acc-life">
        <div class="grid-2">
          <div class="rule"><b>å®¶äº‹ï¼ˆãƒ‡ãƒ•ã‚©æ¯æ—¥ï¼‰</b><ul class="clean"><li>é¢¨å‘‚æƒé™¤ / é£Ÿå™¨æ´—ã„ï¼ˆå¿…é ˆï¼‰</li><li>ï¼‹ãƒ­ãƒ¼ãƒ†1ã¤ï¼šæœˆã‚´ãƒŸ/ç«åºŠ/æ°´æ´—æ¿¯/æœ¨ã‚­ãƒƒãƒãƒ³/é‡‘è²·ã„å‡ºã—/åœŸéƒ¨å±‹/æ—¥ä½œã‚Šç½®ã</li></ul></div>
          <div class="rule"><b>ä¾å­˜å¯¾ç­–</b><ul class="clean"><li>ã‚¹ãƒãƒ›å¯å®¤å¤– / ãƒ™ãƒƒãƒ‰ã§ã‚¹ãƒãƒ›ç¦æ­¢</li><li>SNS/YouTubeï¼šæ˜¼15åˆ†ï¼‹å¤œ30åˆ†ï¼ˆã‚¿ã‚¤ãƒãƒ¼ï¼‰</li><li>ç½®æ›30ç§’ï¼šæ°´â†’ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ10â†’ã‚¢ãƒ—ãƒªçµ‚äº†â†’æœº</li></ul></div>
        </div>
        <div class="rule" style="margin-top:12px">
          <b>KPI & é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆè‡ªå‹•ToDoï¼‰</b>
          <div class="todo" id="todo-weekly"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Bottom bar -->
  <div class="bbar">
    <button class="btn" id="quickGym">ğŸ‹ï¸ ã‚¸ãƒ </button>
    <button class="btn" id="quickStudy">ğŸ“š å­¦ç¿’45åˆ†</button>
    <button class="btn" id="quickHouse">ğŸ§½ å®¶äº‹é”æˆ</button>
  </div>

  <!-- FAB -->
  <button class="fab" id="fab">ï¼‹</button>

  <!-- Bottom sheet modal -->
  <div id="modal">
    <div class="sheet" role="dialog" aria-modal="true" aria-label="KPIç·¨é›†">
      <h3>KPIç·¨é›† <span style="color:var(--muted); font-size:var(--fs-sm)">ä¿å­˜ã™ã‚‹ã¨å³åæ˜ </span></h3>
      <div class="grid-2" style="gap:12px">
        <div class="rule">
          <b>ä½“é‡</b>
          <div class="row"><label class="kmuted" style="min-width:96px">ç¾åœ¨</label><input id="f_wt" class="input" type="number" step="0.1" inputmode="decimal"></div>
          <div class="row"><label class="kmuted" style="min-width:96px">ç›®æ¨™</label><input id="f_wtTarget" class="input" type="number" step="0.1" inputmode="decimal"></div>
        </div>
        <div class="rule">
          <b>ç¡çœ </b>
          <div class="row"><label class="kmuted" style="min-width:96px">å¹³å‡(h)</label><input id="f_sleep" class="input" type="number" step="0.1" inputmode="decimal"></div>
          <div class="row"><label class="kmuted" style="min-width:96px">ä¸‹é™(h)</label><input id="f_sleepMin" class="input" type="number" step="0.1" inputmode="decimal"></div>
        </div>
        <div class="rule">
          <b>æ°´åˆ†</b>
          <div class="row"><label class="kmuted" style="min-width:96px">ç¾åœ¨(L)</label><input id="f_water" class="input" type="number" step="0.1" inputmode="decimal"></div>
          <div class="row"><label class="kmuted" style="min-width:96px">åˆå®¿æ™‚(L)</label><input id="f_waterCamp" class="input" type="number" step="0.1" inputmode="decimal"></div>
        </div>
        <div class="rule">
          <b>é »åº¦è¨­å®š</b>
          <div class="row"><label class="kmuted" style="min-width:120px">é€±ã®ã‚¸ãƒ </label><input id="f_gymPerWeek" class="input" type="number" step="1" inputmode="numeric"></div>
          <div class="row"><label class="kmuted" style="min-width:120px">ã‚¹ãƒ—ãƒªãƒ³ãƒˆ/é€±</label><input id="f_sprintPerWeek" class="input" type="number" step="1" inputmode="numeric"></div>
        </div>
      </div>
      <div class="row" style="justify-content:flex-end; gap:10px; margin-top:12px">
        <button class="btn iconbtn" id="close">âœ–</button>
        <button class="btn" id="save">ä¿å­˜</button>
      </div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // ===== util =====
  const $ = (id) => document.getElementById(id);
  const root = $('root');
  const THEME_KEY = 'oku_theme';
  const STATE_KEY = 'oku_kpi_v3';

  // ===== å‚ç…§ã®å–å¾—ï¼ˆå…ˆã«å…¨éƒ¨ï¼‰ =====
  const btnTheme = $('theme');
  const btnReset = $('reset');
  const btnEdit  = $('edit');

  // KPIè¡¨ç¤ºã‚«ãƒ¼ãƒ‰
  const elWt = $('wt'), elWtTarget = $('wtTarget'), elWtInput = $('wtInput');
  const elSleep = $('sleep'), elSleepMin = $('sleepMin'), elSlInput = $('slInput');
  const elWater = $('water'), elWaterCamp = $('waterCamp'), elWaInput = $('waInput');

  const btnWtMinus = $('wtMinus'), btnWtPlus = $('wtPlus');
  const btnSlMinus = $('slMinus'), btnSlPlus = $('slPlus');
  const btnWaMinus = $('waMinus'), btnWaPlus = $('waPlus');

  // ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆï¼‰
  const modal = $('modal');
  const btnClose = $('close');
  const btnSave  = $('save');
  const f_wt = $('f_wt'), f_wtTarget = $('f_wtTarget');
  const f_sleep = $('f_sleep'), f_sleepMin = $('f_sleepMin');
  const f_water = $('f_water'), f_waterCamp = $('f_waterCamp');
  const f_gymPerWeek = $('f_gymPerWeek'), f_sprintPerWeek = $('f_sprintPerWeek');

  // ã‚¿ãƒ–
  const tabs = [...document.querySelectorAll('.tab')];
  const panes = [...document.querySelectorAll('.tabpane')];

  // ã‚¯ã‚¤ãƒƒã‚¯ãƒœã‚¿ãƒ³
  const quickGym = $('quickGym'), quickStudy = $('quickStudy'), quickHouse = $('quickHouse');
  const fab = $('fab');

  // ===== ãƒ†ãƒ¼ãƒ =====
  function applyTheme(t){ root.className = t; localStorage.setItem(THEME_KEY, t); }
  applyTheme(localStorage.getItem(THEME_KEY) || 'light');
  btnTheme.addEventListener('click', () => applyTheme(root.className === 'light' ? '' : 'light'));

  // ===== ã‚¹ãƒ†ãƒ¼ãƒˆ =====
  const defaults = { wt:71, wtTarget:77, sleep:7.0, sleepMin:7.0, water:2.5, waterCamp:3.0, gymPerWeek:4, sprintPerWeek:2 };
  const state = Object.assign({}, defaults, JSON.parse(localStorage.getItem(STATE_KEY) || '{}'));
  function save(){ localStorage.setItem(STATE_KEY, JSON.stringify(state)); render(); }
  function n1(x){ return Number(x).toFixed(1).replace(/\.0$/,''); }

  // ===== ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆå…±é€šï¼‰ =====
  function bindChecklist(container,key,items){
    const el = $(container);
    const s = JSON.parse(localStorage.getItem(key)||'{}');
    el.innerHTML = '';
    items.forEach((t,i)=>{
      const id = key+'_'+i;
      const wrap = document.createElement('div'); wrap.className='item';
      const cb = document.createElement('input'); cb.type='checkbox'; cb.id=id; cb.checked=!!s[id];
      cb.addEventListener('change',()=>{ s[id]=cb.checked; localStorage.setItem(key,JSON.stringify(s)); });
      const lab = document.createElement('label'); lab.className='label'; lab.setAttribute('for',id); lab.innerText=t;
      wrap.appendChild(cb); wrap.appendChild(lab); el.appendChild(wrap);
    });
  }
  function weeklyItems(){
    return [
      'KPIå…¥åŠ›ï¼šä½“é‡ãƒ»ç¡çœ å¹³å‡ãƒ»æ°´åˆ†ãƒ»ã‚¹ãƒ—ãƒªãƒ³ãƒˆTT',
      'å‰¯æ¥­ï¼šBæ”¹å–„Ã—2 / Cãƒªãƒªãƒ¼ã‚¹Ã—1',
      'çŸ¥è­˜ï¼š1æ—¥1æšÃ—7â†’é‡‘åœŸã‚¯ã‚¤ã‚º10å•',
      'å®¶äº‹ï¼šãƒ‡ãƒ•ã‚©æ¯æ—¥ï¼‹ãƒ­ãƒ¼ãƒ†é”æˆ80%+',
      'ä¾å­˜å¯¾ç­–ï¼šâ—‹Ã—ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ›´æ–°',
      'æ¬¡é€±ã®3ã‚¿ã‚¹ã‚¯æ±ºå®šï¼ˆæœ€å¤§3ã¤ï¼‰'
    ];
  }
  function bindWeekly(){ bindChecklist('todo-weekly','chk_weekly', weeklyItems()); }

  // ===== ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆè¦ç´ å‚ç…§å¾Œãªã‚‰å®‰å…¨ï¼‰ =====
  function render(){
    // KPIè¡¨ç¤º
    elWt.textContent      = n1(state.wt);
    elWtTarget.textContent= Number(state.wtTarget).toFixed(0);
    elSleep.textContent   = Number(state.sleep).toFixed(1);
    elSleepMin.textContent= Number(state.sleepMin).toFixed(1);
    elWater.textContent   = Number(state.water).toFixed(1);
    elWaterCamp.textContent= Number(state.waterCamp).toFixed(1);

    // KPIå…¥åŠ›æ¬„
    elWtInput.value = state.wt;
    elSlInput.value = state.sleep;
    elWaInput.value = state.water;

    // ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ•ã‚©ãƒ¼ãƒ 
    f_wt.value = state.wt; f_wtTarget.value = state.wtTarget;
    f_sleep.value = state.sleep; f_sleepMin.value = state.sleepMin;
    f_water.value = state.water; f_waterCamp.value = state.waterCamp;
    f_gymPerWeek.value = state.gymPerWeek; f_sprintPerWeek.value = state.sprintPerWeek;

    // é€±é–“ï¼ˆå¹³æ—¥ï¼‰ãƒã‚§ãƒƒã‚¯
    bindChecklist('todo-weekday','chk_weekday',[
      '06:30 èµ·åºŠâ†’æ°´â†’æ—¥å…‰â†’çŸ¥è­˜ãƒãƒ¼ãƒˆ15åˆ†',
      'å‡ºå‹¤å‰ï¼šè·ç‰©ãƒã‚§ãƒƒã‚¯ï¼ˆPC/ãƒœãƒˆãƒ«/ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³ï¼‰',
      '12:30 æ•£æ­©10åˆ†ï¼‹SNS 15åˆ†ã¾ã§',
      'å¸°å®…å¾Œï¼šé¢¨å‘‚æƒé™¤ï¼‹é£Ÿå™¨æ´—ã„ï¼ˆå¿…é ˆï¼‰',
      `ã‚¸ãƒ  or ã‚¹ãƒ—ãƒªãƒ³ãƒˆï¼ˆé€±${state.gymPerWeek}/${state.sprintPerWeek}ï¼‰`,
      'é¢¨å‘‚â†’æ „é¤Šâ†’å­¦ç¿’45åˆ†ï¼ˆæŠ€è¡“/çŸ¥è­˜ï¼‰',
      '23:00 ã‚¹ãƒˆãƒ¬ãƒƒãƒ / ã‚¹ãƒãƒ›åˆ¥å®¤å……é›»â†’23:30å°±å¯ï¼ˆ7hï¼‰'
    ]);

    // é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼
    bindWeekly();
  }

  // ===== KPIã‚«ãƒ¼ãƒ‰ï¼šÂ±ã¨ç›´æ¥å…¥åŠ› =====
  function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }
  btnWtMinus.addEventListener('click', ()=>{ state.wt = clamp(+state.wt-0.1, 40,150); save(); });
  btnWtPlus .addEventListener('click', ()=>{ state.wt = clamp(+state.wt+0.1, 40,150); save(); });
  elWtInput.addEventListener('change', ()=>{ state.wt = clamp(parseFloat(elWtInput.value||state.wt), 40,150); save(); });

  btnSlMinus.addEventListener('click', ()=>{ state.sleep = clamp(+state.sleep-0.1, 0,16); save(); });
  btnSlPlus .addEventListener('click', ()=>{ state.sleep = clamp(+state.sleep+0.1, 0,16); save(); });
  elSlInput.addEventListener('change', ()=>{ state.sleep = clamp(parseFloat(elSlInput.value||state.sleep), 0,16); save(); });

  btnWaMinus.addEventListener('click', ()=>{ state.water = clamp(+state.water-0.1, 0,10); save(); });
  btnWaPlus .addEventListener('click', ()=>{ state.water = clamp(+state.water+0.1, 0,10); save(); });
  elWaInput.addEventListener('change', ()=>{ state.water = clamp(parseFloat(elWaInput.value||state.water), 0,10); save(); });

  // ===== ãƒ¢ãƒ¼ãƒ€ãƒ« =====
  const openSheet  = () => { modal.style.display = 'block'; };
  const closeSheet = () => { modal.style.display = 'none'; };
  btnEdit.addEventListener('click', openSheet);
  btnClose.addEventListener('click', closeSheet);
  modal.addEventListener('click', (e)=>{ if(e.target===modal) closeSheet(); });
  btnSave.addEventListener('click', ()=>{
    state.wt = +f_wt.value || state.wt;
    state.wtTarget = +f_wtTarget.value || state.wtTarget;
    state.sleep = +f_sleep.value || state.sleep;
    state.sleepMin = +f_sleepMin.value || state.sleepMin;
    state.water = +f_water.value || state.water;
    state.waterCamp = +f_waterCamp.value || state.waterCamp;
    state.gymPerWeek = +f_gymPerWeek.value || state.gymPerWeek;
    state.sprintPerWeek = +f_sprintPerWeek.value || state.sprintPerWeek;
    save(); closeSheet();
  });

  // ===== ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ =====
  document.querySelectorAll('.accordion .head').forEach(head=>{
    head.addEventListener('click', ()=>{
      const id = head.dataset.acc;
      const body = $('acc-'+id);
      const chev = $('chev-'+id);
      const open = body.style.display !== 'none';
      body.style.display = open ? 'none' : 'block';
      chev.classList.toggle('rotate', !open);
    });
  });
  ['road','pillars','week','train','know','life'].forEach(id=> $('acc-'+id).style.display='block');

  // ===== ã‚¿ãƒ– + ã‚¹ãƒ¯ã‚¤ãƒ— =====
  function activateTab(id){
    tabs.forEach(t=>t.classList.toggle('active', t.dataset.tab===id));
    panes.forEach(p=>p.classList.toggle('hidden', p.id!==id));
  }
  tabs.forEach(tab=> tab.addEventListener('click',()=> activateTab(tab.dataset.tab)));

  function enableSwipeOn(id){
    const el = $(id);
    let x0=null;
    el.addEventListener('touchstart',e=>{ x0=e.touches[0].clientX; },{passive:true});
    el.addEventListener('touchmove',e=>{
      if(x0==null) return;
      const dx=e.touches[0].clientX-x0;
      if(Math.abs(dx)>60){
        const order=['mon','sat','sun'];
        const cur = order.findIndex(pid=> !$(pid).classList.contains('hidden'));
        const next = dx<0 ? Math.min(cur+1,order.length-1) : Math.max(cur-1,0);
        activateTab(order[next]);
        x0=null;
      }
    },{passive:true});
  }
  ['mon','sat','sun'].forEach(enableSwipeOn);

  // ===== ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆåˆæœŸåŒ–ï¼ˆç©ºâ†’renderã§ä¸Šæ›¸ãï¼‰ =====
  bindChecklist('todo-weekday','chk_weekday',[]);
  bindChecklist('todo-sat','chk_sat',[
    '10:00â€“12:00 ãƒ©ã‚°ãƒ“ãƒ¼ï¼ˆã€œ13:00ã®å ´åˆã‚ã‚Šï¼‰',
    'è£œçµ¦ï¼šç³–ï¼‹WPI / ã‚¹ãƒˆãƒ¬ãƒƒãƒ',
    'è£œå¼·ï¼ˆä¸‹åŠèº«/ä½“å¹¹ï¼‰',
    'éƒ¨å±‹ãƒªã‚»ãƒƒãƒˆ60åˆ†',
    'ä½œã‚Šç½®ã1å“'
  ]);
  bindChecklist('todo-sun','chk_sun',[
    'å›å¾©ï¼šè»½ã„æœ‰é…¸ç´  or ãƒ¢ãƒ“ãƒªãƒ†ã‚£',
    'é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼20åˆ†ï¼ˆKPIãƒ»äºˆå®šæ›´æ–°ï¼‰',
    'ãƒ‡ãƒ¼ãƒˆ/å®¶æ—ã®æ™‚é–“',
    'ä½œã‚Šç½®ã2å“'
  ]);
  bindWeekly();

  // ===== ãƒœãƒˆãƒ ãƒãƒ¼ & FAB =====
  quickGym.addEventListener('click', ()=> alert('ã‚¸ãƒ è¡Œã£ã¦ã‚‰ã£ã—ã‚ƒã„ğŸ’ªï¼ˆçµ‚ã‚ã£ãŸã‚‰ãƒã‚§ãƒƒã‚¯ï¼‰'));
  quickStudy.addEventListener('click', ()=> alert('å­¦ç¿’45åˆ†ã‚¹ã‚¿ãƒ¼ãƒˆğŸ“š'));
  quickHouse.addEventListener('click', ()=> alert('å®¶äº‹é”æˆãŠç–²ã‚Œï¼ğŸ§½'));
  fab.addEventListener('click', openSheet);

  // ===== ãƒªã‚»ãƒƒãƒˆ =====
  btnReset.addEventListener('click', ()=>{
    if(confirm('å…¨ãƒã‚§ãƒƒã‚¯ã¨è¨­å®šã‚’åˆæœŸåŒ–ã—ã¾ã™ã‹ï¼Ÿ')){
      const theme = localStorage.getItem(THEME_KEY);
      localStorage.clear();
      if(theme) localStorage.setItem(THEME_KEY, theme);
      location.reload();
    }
  });

  // ===== æœ€åˆã®æç”» =====
  render();
});
</script>

</body>
</html>
